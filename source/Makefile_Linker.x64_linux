# Project: exvm_x64

BIN      = bin/linker_x64
CXXFLAGS = -O3 -Wall -W -m64 -march=native -fomit-frame-pointer -fno-exceptions -fexpensive-optimizations -D_VM_HOST_OS=_VM_HOST_LINUX_X64 -D_GCC_USE_BUILTIN
OBJ      =  obj/x64_linux/vm_symbol.o \
            obj/x64_linux/vm_linker.o \
            obj/x64_linux/test_linker.o

$(BIN): $(OBJ) Makefile_Linker.x64_linux
	$(CXX) $(CXXFLAGS) $(OBJ) -o $(BIN)

obj/x64_linux/vm_symbol.o: vm_symbol.cpp include/machine.hpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

obj/x64_linux/vm_linker.o: vm_linker.cpp include/machine.hpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

obj/x64_linux/test_linker.o: test_linker.cpp include/machine.hpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

clean:
	$(RM) $(TARGET) obj/x64_linux/*.o *~ core

